```rust
Some(
    [
        "let mut line_segments: []LineSegmentStroke = []",
        "let mut start = 0",
        "let mut end = 1",
        "let mut max_end = ct.points.ilen()",
        "while end <= max_end:\n        end = extend_end(ct, start, r)\n        let ls_extend_end = LineSegmentStroke::new(ct, start, end)\n        let mut extend_start_flag = true\n        if line_segments.ilen() > 0:\n            let dp_extend_end = ls_extend_end.displacement()\n            let dp_previous = line_segments.last()!.displacement()\n            if dp_extend_end.cross(dp_previous).abs() < 0.01 \n                    and dp_extend_end.dot(dp_previous) > 0.0:\n                let N = ct.points.ilen()\n                line_segments.last()! = LineSegmentStroke::new(ct, line_segments.last()!.points.start(), end)\n                extend_start_flag = false\n        if extend_start_flag:\n            start = extend_start(ct, start, end, r)\n            let mut ls = LineSegmentStroke::new(ct, start, end)\n            if line_segments.ilen() > 0:\n                let ls_last = line_segments.last()!\n                let dp_last = ls_last.displacement()\n                let dp = ls.displacement()\n                let dp1 = ls_last.start.to(ls.end)\n                if dp.cross(dp_last).abs() < 0.001 \n                        and dp.dot(dp_last) > 0.0 \n                        and dp.cross(dp1).abs()<0.001 \n                        and dp.dot(dp1) > 0.0:\n                    let ls_last = line_segments.pop()!\n                    ls = LineSegmentStroke::new(ct, ls_last.points.start(), ls.points.end())\n            else:\n                max_end = start + ct.points.ilen()\n            line_segments.push(ls)\n        start = end\n        end = start + 1",
        "let N = ct.points.ilen()",
        "let first_line_segment_points_end = line_segments.first()!.points.end()",
        "let last_line_segment = line_segments.last()!",
        "if last_line_segment.points.end() >= first_line_segment_points_end + N:\n        let last_line_segment = line_segments.pop()!\n        line_segments.first()! = LineSegmentStroke::new(\n            ct,\n            last_line_segment.points.start() - N,\n            line_segments.first()!.points.end() - 1\n        )",
        "line_segments",
        "let mut line_segments: []LineSegmentStroke = []\n    let mut start = 0\n    let mut end = 1\n    let mut max_end = ct.points.ilen()\n    while end <= max_end:\n        end = extend_end(ct, start, r)\n        let ls_extend_end = LineSegmentStroke::new(ct, start, end)\n        let mut extend_start_flag = true\n        if line_segments.ilen() > 0:\n            let dp_extend_end = ls_extend_end.displacement()\n            let dp_previous = line_segments.last()!.displacement()\n            if dp_extend_end.cross(dp_previous).abs() < 0.01 \n                    and dp_extend_end.dot(dp_previous) > 0.0:\n                let N = ct.points.ilen()\n                line_segments.last()! = LineSegmentStroke::new(ct, line_segments.last()!.points.start(), end)\n                extend_start_flag = false\n        if extend_start_flag:\n            start = extend_start(ct, start, end, r)\n            let mut ls = LineSegmentStroke::new(ct, start, end)\n            if line_segments.ilen() > 0:\n                let ls_last = line_segments.last()!\n                let dp_last = ls_last.displacement()\n                let dp = ls.displacement()\n                let dp1 = ls_last.start.to(ls.end)\n                if dp.cross(dp_last).abs() < 0.001 \n                        and dp.dot(dp_last) > 0.0 \n                        and dp.cross(dp1).abs()<0.001 \n                        and dp.dot(dp1) > 0.0:\n                    let ls_last = line_segments.pop()!\n                    ls = LineSegmentStroke::new(ct, ls_last.points.start(), ls.points.end())\n            else:\n                max_end = start + ct.points.ilen()\n            line_segments.push(ls)\n        start = end\n        end = start + 1\n    let N = ct.points.ilen()\n    let first_line_segment_points_end = line_segments.first()!.points.end()\n    let last_line_segment = line_segments.last()!\n    if last_line_segment.points.end() >= first_line_segment_points_end + N:\n        let last_line_segment = line_segments.pop()!\n        line_segments.first()! = LineSegmentStroke::new(\n            ct,\n            last_line_segment.points.start() - N,\n            line_segments.first()!.points.end() - 1\n        )\n    line_segments",
    ],
)
```